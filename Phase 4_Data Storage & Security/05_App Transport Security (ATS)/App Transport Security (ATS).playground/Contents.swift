//üîê App Transport Security (ATS) ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?
//
//ATS ‡∏Ñ‡∏∑‡∏≠‡∏£‡∏∞‡∏ö‡∏ö ‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡πÄ‡∏ô‡πá‡∏ï
//‡∏ó‡∏µ‡πà Apple ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà iOS 9 ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏´‡πâ ‡∏ó‡∏∏‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÄ‡∏õ‡πá‡∏ô HTTPS (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà HTTP)
//
//‚úÖ ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢:
//‡πÉ‡∏´‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡∏ú‡πà‡∏≤‡∏ô ‚Äú‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏´‡∏±‡∏™ SSL/TLS‚Äù ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏±‡∏Å‡∏à‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Man-in-the-Middle attack)

//üåç ‡∏ó‡∏≥‡πÑ‡∏° Apple ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ ATS?
//
//‡∏Å‡πà‡∏≠‡∏ô iOS 9 ‡∏ô‡∏±‡∏Å‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API ‡∏ú‡πà‡∏≤‡∏ô http:// ‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á
//‡∏ã‡∏∂‡πà‡∏á‡πÑ‡∏°‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (‡πÄ‡∏ä‡πà‡∏ô username, password) ‡∏≠‡∏≤‡∏à‡∏ñ‡∏π‡∏Å‡∏Ç‡πÇ‡∏°‡∏¢‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ó‡∏≤‡∏á‡πÑ‡∏î‡πâ
//
//‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà iOS 9 ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏ô‡∏°‡∏≤:
//
//‚ùå http:// ‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÇ‡∏î‡∏¢‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
//‚úÖ ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ https:// ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô (‡∏°‡∏µ SSL Certificate)

//üß∞ ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á ATS (‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏á)

//‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÅ‡∏≠‡∏õ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API ‡∏î‡πâ‡∏ß‡∏¢ URLSession
//‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤:
//URL ‡πÄ‡∏õ‡πá‡∏ô HTTPS ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
//‡πÉ‡∏ä‡πâ TLS version ‚â• 1.2
//‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á (SSL Certificate) ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
//‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏´‡∏±‡∏™‡∏ó‡∏µ‡πà‡∏≠‡πà‡∏≠‡∏ô‡πÅ‡∏≠ (‡πÄ‡∏ä‡πà‡∏ô SHA-1)
//‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô ‚Üí iOS ‡∏à‡∏∞ ‚Äú‡∏ö‡∏•‡πá‡∏≠‡∏Å‚Äù ‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ ‡πÅ‡∏•‡∏∞‡πÅ‡∏≠‡∏õ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö error ‡πÄ‡∏ä‡πà‡∏ô:
//Error Domain=NSURLErrorDomain Code=-1022
//"The resource could not be loaded because the App Transport Security policy requires the use of a secure connection."

//‚úÖ ‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏´‡πâ‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå HTTPS ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ
//‡∏ñ‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö HTTPS ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß
//‡∏Ñ‡∏∏‡∏ì ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏•‡∏¢
//ATS ‡∏à‡∏∞‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
//let url = URL(string: "https://jsonplaceholder.typicode.com/posts/1")
//‡∏Ñ‡πâ‡∏î‡∏ô‡∏µ‡πâ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ ‚úÖ
//‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÇ‡∏î‡πÄ‡∏°‡∏ô‡∏°‡∏µ‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á SSL ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

//‚ö†Ô∏è ‡πÅ‡∏ï‡πà‡∏ñ‡πâ‡∏≤ API ‡∏¢‡∏±‡∏á‡πÄ‡∏õ‡πá‡∏ô HTTP (‡πÑ‡∏°‡πà‡∏°‡∏µ SSL)?
//let url = URL(string: "http://example.com/api")

//‡∏à‡∏∞‡πÇ‡∏î‡∏ô ATS ‡∏ö‡∏•‡πá‡∏≠‡∏Å‡∏ó‡∏±‡∏ô‡∏ó‡∏µ ‚ùå
//‡∏ó‡∏≤‡∏á‡πÅ‡∏Å‡πâ‡∏°‡∏µ 2 ‡πÅ‡∏ö‡∏ö

//ü©π ‡∏ó‡∏≤‡∏á‡πÅ‡∏Å‡πâ‡πÅ‡∏ö‡∏ö ‚Äú‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß‚Äù (‡πÄ‡∏õ‡∏¥‡∏î ATS Exception)
//‡πÑ‡∏õ‡∏ó‡∏µ‡πà Info.plist ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏û‡∏¥‡πà‡∏° key ‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ:

//<key>NSAppTransportSecurity</key>
//<dict>
//    <key>NSAllowsArbitraryLoads</key>
//    <true/>
//</dict>

//üîì ‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏∂‡∏á ‚Äú‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ‡πÇ‡∏´‡∏•‡∏î‡∏à‡∏≤‡∏Å HTTP ‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡πÄ‡∏ß‡πá‡∏ö‚Äù
//‡πÅ‡∏ï‡πà ‡πÑ‡∏°‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô Production ‚ùó
//‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£ ‚Äú‡∏õ‡∏¥‡∏î ATS ‡∏ó‡∏¥‡πâ‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏£‡∏∞‡∏ö‡∏ö‚Äù

//‚úÖ ‡∏ó‡∏≤‡∏á‡πÅ‡∏Å‡πâ‡πÅ‡∏ö‡∏ö ‚Äú‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÇ‡∏î‡πÄ‡∏°‡∏ô‚Äù (‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏Å‡∏ß‡πà‡∏≤)
//‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ö‡∏≤‡∏á‡πÇ‡∏î‡πÄ‡∏°‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô ‡πÄ‡∏ä‡πà‡∏ô API ‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÄ‡∏≠‡∏á:

//<key>NSAppTransportSecurity</key>
//<dict>
//    <key>NSExceptionDomains</key>
//    <dict>
//        <key>example.com</key>
//        <dict>
//            <key>NSExceptionAllowsInsecureHTTPLoads</key>
//            <true/>
//            <key>NSIncludesSubdomains</key>
//            <true/>
//        </dict>
//    </dict>
//</dict>

//üß† ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢:
//NSExceptionAllowsInsecureHTTPLoads: ‡∏¢‡∏≠‡∏°‡πÉ‡∏´‡πâ‡πÇ‡∏´‡∏•‡∏î http://
//NSIncludesSubdomains: ‡∏£‡∏ß‡∏°‡πÇ‡∏î‡πÄ‡∏°‡∏ô‡∏¢‡πà‡∏≠‡∏¢ (api.example.com)

//üß± ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á Info.plist ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

//<key>NSAppTransportSecurity</key>
//<dict>
//    <key>NSExceptionDomains</key>
//    <dict>
//        <key>myapi.com</key>
//        <dict>
//            <key>NSIncludesSubdomains</key>
//            <true/>
//            <key>NSExceptionAllowsInsecureHTTPLoads</key>
//            <true/>
//        </dict>
//    </dict>
//</dict>

//üîç ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ ATS ‡∏ö‡∏•‡πá‡∏≠‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
//‡∏ñ‡πâ‡∏≤‡πÄ‡∏à‡∏≠ error ‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡πÉ‡∏ô console:
//App Transport Security has blocked a cleartext HTTP (http://) resource load

//‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤:
//URL ‡πÉ‡∏ä‡πâ http ‡∏´‡∏£‡∏∑‡∏≠ https
//‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ ATS ‡πÉ‡∏ô Info.plist ‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
//‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á SSL ‡∏Ç‡∏≠‡∏á server ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà

//üîí ‡∏ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏≤‡∏Å ‚Äú‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‚Äù
//
//Apple ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:
//‡πÉ‡∏ä‡πâ HTTPS ‡∏ó‡∏∏‡∏Å‡πÇ‡∏î‡πÄ‡∏°‡∏ô
//‡πÉ‡∏ä‡πâ TLS 1.3 ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤
//‡πÉ‡∏ä‡πâ certificate ‡∏ó‡∏µ‡πà‡∏•‡∏á‡∏ô‡∏≤‡∏°‡πÇ‡∏î‡∏¢ CA (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà self-signed)
//‡πÄ‡∏õ‡∏¥‡∏î SSL Pinning ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏≠‡∏° certificate (‡∏Ç‡∏±‡πâ‡∏ô‡∏™‡∏π‡∏á)

//üß© ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ ATS + URLSession

//func fetchSecureData() async {
//    guard let url = URL(string: "https://jsonplaceholder.typicode.com/posts/1") else { return }
//    
//    do {
//        let (data, _) = try await URLSession.shared.data(from: url)
//        let post = try JSONDecoder().decode(Post.self, from: data)
//        print("‚úÖ Title:", post.title)
//    } catch {
//        print("‚ùå Error:", error.localizedDescription)
//    }
//}

//‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ‡∏ú‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏´‡∏°‡∏Ñ‡∏£‡∏±‡∏ö
//üëâ ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ ‚ÄúSSL Pinning ‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö ATS‚Äù
//‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô ‚Äú‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏≠‡∏°‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á (Man-in-the-Middle)‚Äù ‡πÅ‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡πÅ‡∏≠‡∏õ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏à‡∏£‡∏¥‡∏á üîíüì±








